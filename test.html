<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script src="OpenDensityTool.html"></script>
</head>
<body>
    <script>
        function runTests() {
            console.log('Running tests...');

            // Test: computeMetrics should not return NaN for ascent/descent with a mock font
            (function testComputeMetricsNaN() {
                const tool = new DensityTool();
                const mockFont = {
                    unitsPerEm: 1000,
                    tables: { os2: {}, hhea: {} },
                    stringToGlyphs: () => [],
                    getPath: () => ({ getBoundingBox: () => ({ x1: 0, x2: 0, y1: 0, y2: 0 }) }),
                    getAdvanceWidth: () => 1000,
                };

                delete mockFont.ascender;
                delete mockFont.descender;

                const text = 'test';
                const fontSize = 100;
                const letterSpacing = 0;

                const metrics = tool.computeMetrics(mockFont, text, fontSize, letterSpacing);

                if (isNaN(metrics.ascent) || isNaN(metrics.descent)) {
                    console.error('Test failed: computeMetrics returned NaN for ascent or descent.');
                } else {
                    console.log('Test passed: computeMetrics did not return NaN.');
                }
            })();

            console.log('All tests complete.');
        }
        runTests();
    </script>
</body>
</html>